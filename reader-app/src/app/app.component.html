<div class="app-container">
  <app-header
    (toggleSearch)="toggleSearchPanel()"
    (toggleComments)="toggleCommentsPanel()"
  ></app-header>
  
  <div class="content-container">
    @if (showSearchPanel) {
      <app-search-panel 
        class="search-panel"
        (searchResultSelected)="onSearchResultSelected($event)"
      ></app-search-panel>
    }

    <div class="main-container" [class.with-search]="showSearchPanel" [class.with-comments]="showCommentsPanel">
      @if (viewerState) {
        <app-document-viewer
          class="document-viewer"
          [pageNumber]="viewerState.pageNumber"
          [occurrenceIndex]="viewerState.occurrenceIndex"
          [lookingForText]="viewerState.searchText"
          [src]="pdfContent"
        ></app-document-viewer>
      } @else {
        <div class="document-viewer-placeholder">
          Select a search result to view the document
        </div>
      }
    </div>

    @if (showCommentsPanel) {
      <app-comments-panel class="comments-panel"></app-comments-panel>
    }
  </div>
</div>